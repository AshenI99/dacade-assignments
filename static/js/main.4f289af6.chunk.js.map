{"version":3,"sources":["utils/config.js","utils/near.js","components/EditModal.js","components/MyStories.js","components/AllStories.js","components/Loader.js","Home.js","components/Login.js","App.js","reportWebVitals.js","index.js"],"names":["CONTRACT_NAME","process","environment","env","networkId","nodeUrl","contractName","walletUrl","helperUrl","explorerUrl","Error","nearEnv","connect","Object","assign","deps","keyStore","keyStores","BrowserLocalStorageKeyStore","near","window","walletConnection","WalletConnection","accountId","getAccountId","contract","Contract","account","viewMethods","changeMethods","login","requestSignIn","getMyStories","sender","console","log","formatDate","date","datee","length","slice","dateee","Date","parseInt","toDateString","toLocaleTimeString","toString","EditModal","story","fetchStories","useEffect","FormSelect","init","document","querySelector","id","useState","title","description","status","editedStory","setEditedStory","handleChange","e","target","name","value","className","action","method","type","onChange","maxLength","htmlFor","onClick","editStory","then","res","location","reload","href","MyStories","stories","elems","querySelectorAll","Modal","deleteStor","deleteStory","map","i","createdAt","stor","getElementById","click","owner","AllStories","Loader","Home","setStories","pubStories","setPubStories","setStory","useCallback","getStories","b","placeholder","now","newStory","createStory","Login","toggle","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","root","ReactDOM","createRoot","nearInitPromise","initializeContract","render","StrictMode","catch","error"],"mappings":"sOAAMA,EAAgBC,sJAAYD,eAAiB,wBA2BpCE,MAzBf,SAAqBC,GACnB,OAAQA,GACN,IAAK,UACH,MAAO,CACLC,UAAW,UACXC,QAAS,+BACTC,aAAcN,EACdO,UAAW,0BACXC,UAAW,kCACXC,YAAa,qCAEjB,IAAK,UACH,MAAO,CACLL,UAAW,UACXC,QAAS,+BACTC,aAAcN,EACdO,UAAW,kCACXC,UAAW,kCACXC,YAAa,qCAEjB,QACE,MAAMC,MAAM,wBAAD,OAAyBP,EAAzB,OAEhB,E,QCtBKQ,EAAUT,EAAY,W,sDAErB,8GACcU,kBACjBC,OAAOC,OACL,CAAEC,KAAM,CAAEC,SAAU,IAAIC,YAAUC,8BAClCP,IAJC,OACCQ,EADD,OAOLC,OAAOC,iBAAmB,IAAIC,mBAAiBH,GAC/CC,OAAOG,UAAYH,OAAOC,iBAAiBG,eAC3CJ,OAAOK,SAAW,IAAIC,WACpBN,OAAOC,iBAAiBM,UACxBhB,EAAQL,aACR,CACEsB,YAAa,CAAC,WAAY,eAAgB,cAC1CC,cAAe,CAAC,WAAY,YAAa,iBAdxC,4C,sBAmBA,SAAeL,IAAtB,+B,sDAAO,iHACEJ,OAAOC,iBAAiBG,gBAD1B,4C,sBAIA,SAASM,IACdV,OAAOC,iBAAiBU,cAAcpB,EAAQL,aAC/C,CAwBM,SAAe0B,IAAtB,+B,sDAAO,8GACgBR,IADhB,cACCS,EADD,OAELC,QAAQC,IAAIF,GAFP,kBAGEb,OAAOK,SAASO,aAAa,CAAEC,YAHjC,4C,sBAMA,SAASG,EAAWC,GACzB,IAAIC,EAAQD,EAAKE,OAAS,GAAKF,EAAKG,MAAM,EAAG,IAAMH,EAC/CI,EAAS,IAAIC,KAAKC,SAASL,IAE/B,OADYG,EAAOG,eAAiB,KAAOH,EAAOI,sBACvCC,UACZ,C,WC7Dc,SAASC,EAAT,GAA6C,IAAxBC,EAAuB,EAAvBA,MAAuB,EAAhBC,aACzCC,qBAAU,WACRC,aAAWC,KAAKC,SAASC,cAAT,uBAAuCN,EAAMO,KAC9D,GAAE,CAACP,IACJ,MAAsCQ,mBAAS,CAC7CC,MAAOT,EAAMS,MACbC,YAAaV,EAAMU,YACnBC,OAAQX,EAAMW,SAHhB,mBAAOC,EAAP,KAAoBC,EAApB,KAKMC,EAAe,SAACC,GACpBF,EAAe,2BAAKD,GAAN,kBAAoBG,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,QAC5D,EACD,OACE,gCACE,sBAAKC,UAAU,gBAAf,UACE,oBAAIA,UAAU,SAAd,6BACA,qBAAKA,UAAU,MAAf,SACE,uBAAMC,OAAO,WAAWC,OAAO,OAAOF,UAAU,UAAhD,UACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,cAAf,UACE,uBACEG,KAAK,OACLL,KAAK,QACLV,GAAG,QACHW,MAAON,EAAYH,MACnBc,SAAUT,EACVU,UAAW,KAEb,uBAAOL,UAAU,SAASM,QAAQ,QAAlC,wBAKJ,qBAAKN,UAAU,MAAf,SACE,sBAAKA,UAAU,cAAf,UACE,yBACED,MAAON,EAAYD,OACnBY,SAAUT,EACVG,KAAK,SACLV,GAAE,sBAAiBP,EAAMO,IAJ3B,UAME,wBAAQW,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,wBAEF,uBAAOO,QAAO,sBAAiBzB,EAAMO,IAArC,yBAGJ,qBAAKY,UAAU,UAAf,SACE,sBAAKA,UAAU,cAAf,UACE,uBACED,MAAON,EAAYF,YACnBa,SAAUT,EACVQ,KAAK,OACLL,KAAK,cACLV,GAAG,gBAEL,uBAAOY,UAAU,SAASM,QAAQ,cAAlC,sCAQV,sBAAKN,UAAU,eAAf,UACE,wBACEA,UAAU,MACVZ,GAAG,aACHmB,QAAS,kBD1BZ,SAAmBnB,EAAIP,GAC5B,OAAO5B,OAAOK,SAASkD,UAAU,CAAEpB,KAAIP,SACxC,CCyBW2B,CAAU3B,EAAMO,GAAIK,GAAagB,MAAK,SAACC,GACrCzD,OAAO0D,SAASC,QACjB,GAHM,EAHX,kBAWA,mBACEC,KAAK,KACLzB,GAAG,YACHY,UAAU,gDAHZ,yBAUP,CCrFc,SAASc,EAAT,GAA+C,IAA1BC,EAAyB,EAAzBA,QAASjC,EAAgB,EAAhBA,aAC3CC,qBAAU,WACR,IAAMiC,EAAQ9B,SAAS+B,iBAAiB,UACxCC,QAAMjC,KAAK+B,GACXhC,aAAWC,KAAKC,SAASC,cAAc,WACxC,GAAE,CAAC4B,IACJ,IAAMI,EAAa,SAAC/B,IF+Bf,SAAqBA,GAC1B,OAAOnC,OAAOK,SAAS8D,YAAY,CAAEhC,MACtC,EEhCGgC,CAAYhC,GAAIqB,MAAK,SAACC,GAAD,OAASzD,OAAO0D,SAASC,QAAzB,GACtB,EAED,OACE,qCACGG,GAAWA,EAAQ3C,OAAS,EAC3B,sBAAK4B,UAAU,YAAf,UACE,yCACA,sDACA,wBAAOA,UAAU,UAAjB,UACE,gCACE,+BACE,uCACA,sCACA,wCACA,4BAGJ,uBAAOZ,GAAG,aAAV,SACG2B,GACCA,EAAQM,KAAI,SAACxC,EAAOyC,GAClB,OACE,+BACE,6BACE,mBACET,KAAI,qBAAgBhC,EAAMO,GAAtB,MACJY,UAAU,gBAFZ,SAIGnB,EAAMS,UAGX,6BAAKrB,EAAWY,EAAM0C,aACtB,6BACE,sBAAMvB,UAAU,cAAhB,SACoB,MAAjBnB,EAAMW,OAAiB,SAAW,cAGvC,+BACE,wBACE,kCAA0BX,EAAMO,IAChCY,UAAU,mCAFZ,SAIE,mBAAGA,UAAU,kBAEf,wBACEO,QAAS,kBAAMY,EAAWtC,EAAMO,GAAvB,EACTY,UAAU,oBAFZ,SAIE,mBAAGA,UAAU,wBA1BVsB,EA+BZ,YAKT,8HAKDP,GACCA,EAAQM,KAAI,SAACG,EAAMF,GACjB,OACE,qCACE,sBAEElC,GAAE,oBAAeoC,EAAKpC,GAApB,MACFY,UAAU,2BAHZ,UAKE,sBAAKA,UAAU,gBAAgBZ,GAAG,mBAAlC,UACE,sBAAKY,UAAU,MAAf,UACE,qBAAKA,UAAU,aAAf,SACE,6BAAKwB,EAAKlC,UAEZ,sBAAKU,UAAU,aAAf,UACE,wBACE,kCAA0BwB,EAAKpC,IAC/BmB,QAAS,kBACPrB,SAASuC,eAAe,WAAWC,OAD5B,EAGT1B,UAAU,mCALZ,SAOE,mBAAGA,UAAU,kBAEf,wBACEO,QAAS,kBAAMY,EAAWK,EAAKpC,GAAtB,EACTY,UAAU,oBAFZ,SAIE,mBAAGA,UAAU,yBAInB,+BACmB,IAAhBwB,EAAKhC,OAAe,SAAW,UADlC,YACsD,IACnDgC,EAAKG,MAFR,OAEmB1D,EAAWuD,EAAKD,cAEnC,4BAAIC,EAAKjC,iBAEX,qBAAKS,UAAU,eAAf,SACE,mBACEa,KAAK,KACLzB,GAAG,UACHY,UAAU,gDAHZ,uBAlCGsB,GA2CP,qBAEElC,GAAE,oBAAeoC,EAAKpC,IACtBY,UAAU,2BAHZ,SAKE,cAACpB,EAAD,CAAWC,MAAO2C,EAAM1C,aAAcA,KAJjCwC,KAQZ,MAGR,CCnIc,SAASM,EAAT,GAAgC,IAAV/C,EAAS,EAATA,MAKnC,OAJAE,qBAAU,WACR,IAAMiC,EAAQ9B,SAAS+B,iBAAiB,UACxCC,QAAMjC,KAAK+B,EACZ,GAAE,IAED,mCACE,sBAAKhB,UAAU,MAAf,UACE,sBAAKA,UAAU,OAAf,UACE,sBAAKA,UAAU,4BAAf,UACE,6BAAKnB,EAAMS,QACX,4BACGT,EAAMU,YAAYnB,OAAS,GACxBS,EAAMU,YAAYlB,MAAM,IACxBQ,EAAMU,cAEZ,uBACA,qBAAKS,UAAU,OAAf,SACE,mBAAGa,KAAK,IAAR,SAAahC,EAAM8C,aAGvB,qBAAK3B,UAAU,2BAAf,SACE,wBACE,kCAA0BnB,EAAMO,GAAhC,MACAY,UAAU,uCAFZ,4BAQJ,sBACEZ,GAAE,oBAAeP,EAAMO,GAArB,MACFY,UAAU,2BAFZ,UAIE,sBAAKA,UAAU,gBAAgBZ,GAAG,mBAAlC,UACE,6BAAKP,EAAMS,QACX,6BAAKrB,EAAWY,EAAM0C,aACtB,4BAAI1C,EAAMU,iBAEZ,qBAAKS,UAAU,eAAf,SACE,mBACEa,KAAK,KACLb,UAAU,gDAFZ,4BAWX,CCrDc,SAAS6B,IACtB,OACE,qBAAK7B,UAAU,cAAf,SACE,qBAAKA,UAAU,iCAAf,SACE,sBAAKA,UAAU,mCAAf,UACE,qBAAKA,UAAU,sBAAf,SACE,qBAAKA,UAAU,aAEjB,qBAAKA,UAAU,YAAf,SACE,qBAAKA,UAAU,aAEjB,qBAAKA,UAAU,uBAAf,SACE,qBAAKA,UAAU,mBAM1B,CCbc,SAAS8B,IACtB,MAA8BzC,mBAAS,IAAvC,mBAAO0B,EAAP,KAAgBgB,EAAhB,KACA,EAAoC1C,mBAAS,IAA7C,mBAAO2C,EAAP,KAAmBC,EAAnB,KACMzE,EAAUP,OAAOC,iBAAiBM,UACxC,EAA0B6B,mBAAS,CACjCC,MAAO,GACPC,YAAa,GACbC,OAAQ,MAHV,mBAAOX,EAAP,KAAcqD,EAAd,KAKMvC,EAAe,SAACC,GACpBsC,EAAS,2BAAKrD,GAAN,kBAAce,EAAEC,OAAOC,KAAOF,EAAEC,OAAOE,QAChD,EACKjB,EAAeqD,sBAAW,gCAAC,4FAC3B3E,EAAQJ,UADmB,6BAE7B6E,EAF6B,SLgC1BhF,OAAOK,SAAS8E,aKhCU,8CAG7BL,EAH6B,SAGZlE,IAHY,+EAejC,OATAE,QAAQC,IAAIa,GACZE,qBAAU,WACR,IAAMiC,EAAQ9B,SAAS+B,iBAAiB,UACpCoB,EAAInB,QAAMjC,KAAK+B,GACnBjD,QAAQC,IAAIqE,GACZtE,QAAQC,IAAI,SACZgB,aAAWC,KAAKC,SAASC,cAAc,YACvCL,GACD,GAAE,IAED,mCACGkD,GAAcA,EAAW5D,OAAS,EACjC,sBAAKgB,GAAG,OAAR,UACE,qBAAKY,UAAU,SAAf,SACE,qBAAKA,UAAU,gBAAf,SACE,sBAAKA,UAAU,wBAAf,UACE,mBAAGa,KAAK,aAAab,UAAU,oBAA/B,wBAGA,oBAAIA,UAAU,QAAd,SACE,6BACE,wBACEA,UAAU,+BACVZ,GAAG,UAFL,SAIGnC,OAAOC,iBAAiBM,UAAUJ,uBAO/C,qBAAK4C,UAAU,UAAf,SACE,qBAAKA,UAAU,mBAAf,SACE,wBACE,cAAY,WACZA,UAAU,wEAFZ,SAIE,mBAAGA,UAAU,qBAInB,qBAAKA,UAAU,aAAf,SACE,sBAAMZ,GAAG,eAAT,iCAEF,cAAC0B,EAAD,CAAWC,QAASA,EAASjC,aAAcA,IAC3C,sBAAKkB,UAAU,YAAf,UACE,oBAAIA,UAAU,SAAd,gCACA,qBAAKA,UAAU,MAAf,SACGgC,GACCA,EAAWX,KAAI,SAACG,EAAMF,GACpB,OAAO,cAACM,EAAD,CAAoB/C,MAAO2C,GAAVF,EACzB,SAIP,sBAAKlC,GAAG,WAAWY,UAAU,2BAA7B,UACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,SAAd,8BACA,qBAAKA,UAAU,MAAf,SACE,uBAAMC,OAAO,WAAWC,OAAO,OAAOF,UAAU,UAAhD,UACE,qBAAKA,UAAU,MAAf,SACE,sBAAKA,UAAU,cAAf,UACE,uBACEG,KAAK,OACLL,KAAK,QACLV,GAAG,QACHkD,YAAY,8CACZvC,MAAOlB,EAAMS,MACbc,SAAUT,EACVU,UAAW,KAEb,uBAAOL,UAAU,SAASM,QAAQ,QAAlC,wBAKJ,qBAAKN,UAAU,MAAf,SACE,sBAAKA,UAAU,cAAf,UACE,yBACED,MAAOlB,EAAMW,OACbY,SAAUT,EACVG,KAAK,SACLV,GAAG,SAJL,UAME,wBAAQW,MAAM,IAAd,oBACA,wBAAQA,MAAM,IAAd,wBAEF,uBAAOO,QAAQ,SAAf,yBAGJ,qBAAKN,UAAU,UAAf,SACE,sBAAKA,UAAU,cAAf,UACE,uBACED,MAAOlB,EAAMU,YACba,SAAUT,EACVQ,KAAK,OACLL,KAAK,cACLV,GAAG,gBAEL,uBAAOkB,QAAQ,cAAf,sCAMV,sBAAKN,UAAU,eAAf,UACE,wBACEA,UAAU,MACVO,QAAS,YLjGlB,SAAqB1B,GAE1B,OADAA,EAAM0C,UAAYhD,KAAKgE,MAAM5D,WACtB1B,OAAOK,SAASkF,SAAS,CAAE3D,SACnC,EK+FiB4D,CAAY5D,GAAO4B,MAAK,SAACC,GACvB5B,IACAI,SAASuC,eAAe,YAAYC,OACrC,GACF,EAPH,kBAWA,mBACEb,KAAK,KACLzB,GAAG,WACHY,UAAU,gDAHZ,6BAWN,cAAC6B,EAAD,KAIP,CC3Jc,SAASa,EAAT,GAA2B,EAAVC,OAC9B,OACE,qBAAK3C,UAAU,OAAOZ,GAAG,QAAzB,SACE,sBAAKY,UAAU,eAAf,UACE,+BACE,mBAAGA,UAAU,uBADf,gBAIA,qBAAKA,UAAU,UAAf,SACE,mBAAGA,UAAU,OAAb,+FAKF,qBAAKA,UAAU,YACf,qBAAKA,UAAU,UAAf,SACE,wBAAQA,UAAU,mBAAmBO,QAAS5C,EAA9C,8CAOT,CCtBc,SAASiF,IAEtB,OADgB3F,OAAOC,iBAAiBM,UACzBJ,UAAY,cAAC0E,EAAD,IAAW,cAACY,EAAD,GACvC,CCPD,IAYeG,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBtC,MAAK,YAAkD,IAA/CuC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,EACT,GAEJ,ECHKO,EAAOC,IAASC,WAAWrE,SAASuC,eAAe,SACzDxE,OAAOuG,gBTHA,WAAP,+BSGyBC,GACtBhD,MAAK,WACJ4C,EAAKK,OACH,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAGL,IACAC,MAAM7F,QAAQ8F,OAKjBhB,G","file":"static/js/main.4f289af6.chunk.js","sourcesContent":["const CONTRACT_NAME = process.env.CONTRACT_NAME || \"my-first.diac.testnet\"; // line 1\n\nfunction environment(env) {\n  switch (env) {\n    case \"mainnet\": // line 5\n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n        explorerUrl: \"https://explorer.mainnet.near.org\",\n      };\n    case \"testnet\": // line 14\n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n        explorerUrl: \"https://explorer.testnet.near.org\",\n      };\n    default:\n      throw Error(`Unknown environment '${env}'.`);\n  }\n}\n\nexport default environment;\n","import environment from \"./config\";\nimport { connect, Contract, keyStores, WalletConnection } from \"near-api-js\";\n\nconst nearEnv = environment(\"testnet\");\n\nexport async function initializeContract() {\n  const near = await connect(\n    Object.assign(\n      { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } },\n      nearEnv\n    )\n  );\n  window.walletConnection = new WalletConnection(near);\n  window.accountId = window.walletConnection.getAccountId();\n  window.contract = new Contract(\n    window.walletConnection.account(),\n    nearEnv.contractName,\n    {\n      viewMethods: [\"getStory\", \"getMyStories\", \"getStories\"],\n      changeMethods: [\"newStory\", \"editStory\", \"deleteStory\"],\n    }\n  );\n}\n\nexport async function getAccountId() {\n  return window.walletConnection.getAccountId();\n}\n\nexport function login() {\n  window.walletConnection.requestSignIn(nearEnv.contractName);\n}\n\nexport function logout() {\n  window.walletConnection.signOut();\n  window.location.reload();\n}\n\nexport function createStory(story) {\n  story.createdAt = Date.now().toString();\n  return window.contract.newStory({ story });\n}\n\nexport function deleteStory(id) {\n  return window.contract.deleteStory({ id });\n}\n\nexport function editStory(id, story) {\n  return window.contract.editStory({ id, story });\n}\n\nexport function getStories() {\n  return window.contract.getStories();\n}\n\nexport async function getMyStories() {\n  const sender = await getAccountId();\n  console.log(sender);\n  return window.contract.getMyStories({ sender });\n}\n\nexport function formatDate(date) {\n  let datee = date.length > 13 ? date.slice(0, 13) : date;\n  let dateee = new Date(parseInt(datee));\n  const dat = dateee.toDateString() + \", \" + dateee.toLocaleTimeString();\n  return dat.toString();\n}\n","import { FormSelect } from \"materialize-css\";\nimport { useEffect, useState } from \"react\";\nimport { editStory } from \"../utils/near\";\n\nexport default function EditModal({ story, fetchStories }) {\n  useEffect(() => {\n    FormSelect.init(document.querySelector(`#status-edit-${story.id}`));\n  }, [story]);\n  const [editedStory, setEditedStory] = useState({\n    title: story.title,\n    description: story.description,\n    status: story.status,\n  });\n  const handleChange = (e) => {\n    setEditedStory({ ...editedStory, [e.target.name]: e.target.value });\n  };\n  return (\n    <div>\n      <div className=\"modal-content\">\n        <h4 className=\"center\">Edit Your Story</h4>\n        <div className=\"row\">\n          <form action=\"/stories\" method=\"POST\" className=\"col s12\">\n            <div className=\"row\">\n              <div className=\"input-field\">\n                <input\n                  type=\"text\"\n                  name=\"title\"\n                  id=\"title\"\n                  value={editedStory.title}\n                  onChange={handleChange}\n                  maxLength={40}\n                />\n                <label className=\"active\" htmlFor=\"title\">\n                  Title\n                </label>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"input-field\">\n                <select\n                  value={editedStory.status}\n                  onChange={handleChange}\n                  name=\"status\"\n                  id={`status-edit-${story.id}`}\n                >\n                  <option value=\"1\">Public</option>\n                  <option value=\"2\">Private</option>\n                </select>\n                <label htmlFor={`status-edit-${story.id}`}>Status</label>\n              </div>\n            </div>\n            <div className=\"row mt5\">\n              <div className=\"input-field\">\n                <input\n                  value={editedStory.description}\n                  onChange={handleChange}\n                  type=\"text\"\n                  name=\"description\"\n                  id=\"description\"\n                />\n                <label className=\"active\" htmlFor=\"description\">\n                  Description\n                </label>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      <div className=\"modal-footer\">\n        <button\n          className=\"btn\"\n          id=\"newstories\"\n          onClick={() =>\n            editStory(story.id, editedStory).then((res) => {\n              window.location.reload();\n            })\n          }\n        >\n          Save\n        </button>\n        <a\n          href=\"#!\"\n          id=\"closeEdit\"\n          className=\"modal-close waves-effect waves-green btn-flat\"\n        >\n          Cancel\n        </a>\n      </div>\n    </div>\n  );\n}\n","import { FormSelect, Modal } from \"materialize-css\";\nimport { useEffect } from \"react\";\nimport { deleteStory, formatDate } from \"../utils/near\";\nimport EditModal from \"./EditModal\";\n\nexport default function MyStories({ stories, fetchStories }) {\n  useEffect(() => {\n    const elems = document.querySelectorAll(\".modal\");\n    Modal.init(elems);\n    FormSelect.init(document.querySelector(\"#status\"));\n  }, [stories]);\n  const deleteStor = (id) => {\n    deleteStory(id).then((res) => window.location.reload());\n  };\n\n  return (\n    <>\n      {stories && stories.length > 0 ? (\n        <div className=\"container\">\n          <h3>Welcome</h3>\n          <p>Here are your stories</p>\n          <table className=\"striped\">\n            <thead>\n              <tr>\n                <th>Title</th>\n                <th>Date</th>\n                <th>Status</th>\n                <th />\n              </tr>\n            </thead>\n            <tbody id=\"my-stories\">\n              {stories &&\n                stories.map((story, i) => {\n                  return (\n                    <tr key={i}>\n                      <td>\n                        <a\n                          href={`#viewModal-${story.id}-m`}\n                          className=\"modal-trigger\"\n                        >\n                          {story.title}\n                        </a>\n                      </td>\n                      <td>{formatDate(story.createdAt)}</td>\n                      <td>\n                        <span className=\"dash-status\">\n                          {story.status === \"1\" ? \"Public\" : \"Private\"}\n                        </span>\n                      </td>\n                      <td>\n                        <button\n                          data-target={`editModal-${story.id}`}\n                          className=\"btn btn-small edit modal-trigger\"\n                        >\n                          <i className=\"fas fa-edit\" />\n                        </button>\n                        <button\n                          onClick={() => deleteStor(story.id)}\n                          className=\"btn red btn-small\"\n                        >\n                          <i className=\"fas fa-trash\" />\n                        </button>\n                      </td>\n                    </tr>\n                  );\n                })}\n            </tbody>\n          </table>\n        </div>\n      ) : (\n        <p>\n          You haven't created any stories. Why not create one using the plus\n          button at the bottom right\n        </p>\n      )}\n      {stories &&\n        stories.map((stor, i) => {\n          return (\n            <>\n              <div\n                key={i}\n                id={`viewModal-${stor.id}-m`}\n                className=\"modal modal-fixed-footer\"\n              >\n                <div className=\"modal-content\" id=\"viewModalContent\">\n                  <div className=\"row\">\n                    <div className=\"col s12 m8\">\n                      <h4>{stor.title}</h4>\n                    </div>\n                    <div className=\"col s12 m4\">\n                      <button\n                        data-target={`editModal-${stor.id}`}\n                        onClick={() =>\n                          document.getElementById(\"closeMy\").click()\n                        }\n                        className=\"btn btn-small edit modal-trigger\"\n                      >\n                        <i className=\"fas fa-edit\" />\n                      </button>\n                      <button\n                        onClick={() => deleteStor(stor.id)}\n                        className=\"btn red btn-small\"\n                      >\n                        <i className=\"fas fa-trash\" />\n                      </button>\n                    </div>\n                  </div>\n                  <h6>\n                    {stor.status === 1 ? \"Public\" : \"Private\"} story by{\" \"}\n                    {stor.owner} on {formatDate(stor.createdAt)}\n                  </h6>\n                  <p>{stor.description}</p>\n                </div>\n                <div className=\"modal-footer\">\n                  <a\n                    href=\"#!\"\n                    id=\"closeMy\"\n                    className=\"modal-close waves-effect waves-green btn-flat\"\n                  >\n                    Close\n                  </a>\n                </div>\n              </div>\n              <div\n                key={i}\n                id={`editModal-${stor.id}`}\n                className=\"modal modal-fixed-footer\"\n              >\n                <EditModal story={stor} fetchStories={fetchStories} />\n              </div>\n            </>\n          );\n        })}\n    </>\n  );\n}\n","import { useEffect } from \"react\";\nimport { formatDate } from \"../utils/near\";\nimport { Modal } from \"materialize-css\";\n\nexport default function AllStories({ story }) {\n  useEffect(() => {\n    const elems = document.querySelectorAll(\".modal\");\n    Modal.init(elems);\n  }, []);\n  return (\n    <>\n      <div className=\"col\">\n        <div className=\"card\">\n          <div className=\"card-content center-align\">\n            <h5>{story.title}</h5>\n            <p>\n              {story.description.length > 30\n                ? story.description.slice(30)\n                : story.description}\n            </p>\n            <br />\n            <div className=\"chip\">\n              <a href=\"#\">{story.owner}</a>\n            </div>\n          </div>\n          <div className=\"card-action center-align\">\n            <button\n              data-target={`viewModal-${story.id}-a`}\n              className=\"btn btn-grey modal-trigger open-view\"\n            >\n              Read More\n            </button>\n          </div>\n        </div>\n        <div\n          id={`viewModal-${story.id}-a`}\n          className=\"modal modal-fixed-footer\"\n        >\n          <div className=\"modal-content\" id=\"viewModalContent\">\n            <h4>{story.title}</h4>\n            <h6>{formatDate(story.createdAt)}</h6>\n            <p>{story.description}</p>\n          </div>\n          <div className=\"modal-footer\">\n            <a\n              href=\"#!\"\n              className=\"modal-close waves-effect waves-green btn-flat\"\n            >\n              Close\n            </a>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from \"react\";\n\nexport default function Loader() {\n  return (\n    <div className=\"center load\">\n      <div className=\"preloader-wrapper small active\">\n        <div className=\"spinner-layer spinner-green-only\">\n          <div className=\"circle-clipper left\">\n            <div className=\"circle\"></div>\n          </div>\n          <div className=\"gap-patch\">\n            <div className=\"circle\"></div>\n          </div>\n          <div className=\"circle-clipper right\">\n            <div className=\"circle\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useState } from \"react\";\nimport { FormSelect, Modal } from \"materialize-css\";\nimport MyStories from \"./components/MyStories\";\nimport AllStories from \"./components/AllStories\";\nimport Loader from \"./components/Loader\";\nimport { createStory, getMyStories, getStories } from \"./utils/near\";\n\nexport default function Home() {\n  const [stories, setStories] = useState([]);\n  const [pubStories, setPubStories] = useState([]);\n  const account = window.walletConnection.account();\n  const [story, setStory] = useState({\n    title: \"\",\n    description: \"\",\n    status: \"1\",\n  });\n  const handleChange = (e) => {\n    setStory({ ...story, [e.target.name]: e.target.value });\n  };\n  const fetchStories = useCallback(async () => {\n    if (account.accountId) {\n      setPubStories(await getStories());\n      setStories(await getMyStories());\n    }\n  });\n  console.log(story);\n  useEffect(() => {\n    const elems = document.querySelectorAll(\".modal\");\n    let b = Modal.init(elems);\n    console.log(b);\n    console.log(\"hmmmm\");\n    FormSelect.init(document.querySelector(\"#status\"));\n    fetchStories();\n  }, []);\n  return (\n    <>\n      {pubStories && pubStories.length > 0 ? (\n        <div id=\"main\">\n          <div className=\"header\">\n            <nav className=\"grey darken-3\">\n              <div className=\"nav-wrapper container\">\n                <a href=\"/dashboard\" className=\"brand-logo center\">\n                  StoryBooks\n                </a>\n                <ul className=\"right\">\n                  <li>\n                    <button\n                      className=\"waves-effect waves-light btn\"\n                      id=\"account\"\n                    >\n                      {window.walletConnection.account().accountId}\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </nav>\n          </div>\n          <div className=\"add_btn\">\n            <div className=\"fixed-action-btn\">\n              <button\n                data-target=\"addModal\"\n                className=\"btn-floating btn-large waves-effect btn modal-trigger waves-light red\"\n              >\n                <i className=\"fa fa-plus\" />\n              </button>\n            </div>\n          </div>\n          <div className=\"alert mt-2\">\n            <span id=\"notification\">⌛ Loading...</span>\n          </div>\n          <MyStories stories={stories} fetchStories={fetchStories} />\n          <div className=\"container\">\n            <h1 className=\"center\">All Public Stories</h1>\n            <div className=\"row\">\n              {pubStories &&\n                pubStories.map((stor, i) => {\n                  return <AllStories key={i} story={stor} />;\n                })}\n            </div>\n          </div>\n          {/* Modal Structure */}\n          <div id=\"addModal\" className=\"modal modal-fixed-footer\">\n            <div className=\"modal-content\">\n              <h4 className=\"center\">Create New Story</h4>\n              <div className=\"row\">\n                <form action=\"/stories\" method=\"POST\" className=\"col s12\">\n                  <div className=\"row\">\n                    <div className=\"input-field\">\n                      <input\n                        type=\"text\"\n                        name=\"title\"\n                        id=\"title\"\n                        placeholder=\"40 characters max. Elaborate in description\"\n                        value={story.title}\n                        onChange={handleChange}\n                        maxLength={40}\n                      />\n                      <label className=\"active\" htmlFor=\"title\">\n                        Title\n                      </label>\n                    </div>\n                  </div>\n                  <div className=\"row\">\n                    <div className=\"input-field\">\n                      <select\n                        value={story.status}\n                        onChange={handleChange}\n                        name=\"status\"\n                        id=\"status\"\n                      >\n                        <option value=\"1\">Public</option>\n                        <option value=\"2\">Private</option>\n                      </select>\n                      <label htmlFor=\"status\">Status</label>\n                    </div>\n                  </div>\n                  <div className=\"row mt5\">\n                    <div className=\"input-field\">\n                      <input\n                        value={story.description}\n                        onChange={handleChange}\n                        type=\"text\"\n                        name=\"description\"\n                        id=\"description\"\n                      />\n                      <label htmlFor=\"description\">Description</label>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  createStory(story).then((res) => {\n                    fetchStories();\n                    document.getElementById(\"closeAdd\").click();\n                  });\n                }}\n              >\n                Save\n              </button>\n              <a\n                href=\"#!\"\n                id=\"closeAdd\"\n                className=\"modal-close waves-effect waves-green btn-flat\"\n              >\n                Cancel\n              </a>\n            </div>\n          </div>\n        </div>\n      ) : (\n        <Loader />\n      )}\n    </>\n  );\n}\n","import React from \"react\";\nimport { login } from \"../utils/near\";\n\nexport default function Login({ toggle }) {\n  return (\n    <div className=\"card\" id=\"login\">\n      <div className=\"card-content\">\n        <h3>\n          <i className=\"fas fa-book-reader\" />\n          Storybooks\n        </h3>\n        <div className=\"section\">\n          <p className=\"lead\">\n            Create public and private stories from your life and see other's\n            public stories\n          </p>\n        </div>\n        <div className=\"divider\" />\n        <div className=\"section\">\n          <button className=\"btn red darken-1\" onClick={login}>\n            Connect Wallet to Continue\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import \"./App.css\";\nimport Home from \"./Home\";\nimport Login from \"./components/Login\";\n\nexport default function App() {\n  const account = window.walletConnection.account();\n  return account.accountId ? <Home /> : <Login />;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"materialize-css/dist/css/materialize.min.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { initializeContract } from \"./utils/near\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nwindow.nearInitPromise = initializeContract()\n  .then(() => {\n    root.render(\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    );\n  })\n  .catch(console.error);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}